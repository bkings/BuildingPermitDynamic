(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{678:function(e,a,t){"use strict";var l=t(56),r=t(55),n=t.n(r),o=t(99),c=t(8),s=t(36),i=t(37),m=t(41),u=t(40),d=t(0),p=t.n(d),b=t(599),h=t(792),E=t(404),f=t(129),j=t(78),A=t(131),v=t(709),C=t(24),O=t(610),g=t(710),w=t(240),F=t(607),y=t(605),D=t(655),R=t(618),_=t(619),T=t(622),N=t(661),S=t(711),k=t(100),V=N.a,x=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var l;Object(s.a)(this,t),(l=a.call(this,e)).getJastaRate=function(e,a){var t=a===S.g[0].value?"J":"O",r=l.state.rajasowMaster.find(function(a){return a.floor===e&&a.floorType===t&&a.constructionType===String(l.state.constructionType)});return r?r.dasturRate:0};var r={},n=l.props,o=n.permitData,i=n.prevData,m=n.otherData.rajasowMaster,u=new T.a(o.floor),d=u.getFormattedFloors();if(r=Object(j.o)(i),Object(C.t)(r)||!r.details){(r={}).details=[],u.getFloorsWithUnit().forEach(function(e,a){return r.details[a]=Object(S.d)(e,m,o.constructionType)});try{var p=r.details.reduce(function(e,a){return e+a.drAmount},0),b=Object(v.f)(p),h=Object(v.g)(p);r.totalAmt=O.h?Object(A.o)(b+h+p):O.j||O.e?Object(A.o)(p):Object(A.o)(p+p/2),r.dharautiAmt=Object(A.o)(p/2),r.totalAmtBeforeDharauti=p,r.batabaranDasturAmt=Object(v.f)(p),r.sarsaphaiDasturAmt=Object(v.g)(p),r.detailsTotal=p}catch(f){r.totalAmt=0,r.dharautiAmt=0,r.totalAmtBeforeDharauti=0,r.batabaranDasturAmt=0,r.sarsaphaiDasturAmt=0,r.detailsTotal=0}}r.details&&r.details.forEach(function(e,a){Object(C.t)(r.hasJasta)&&(r.hasJasta=[]),r.hasJasta[a]=!(!e.jrAmount&&!e.jArea)}),r.details=r.details.sort(function(e,a){return void 0!==e.block&&void 0!==a.block?e.block<a.block?-1:1:e.floor<a.floor?-1:1});var E=Object(j.B)({obj:{jAreaUnit:"SQUARE ".concat(u.getFloorUnit()),dAreaUnit:"SQUARE ".concat(u.getFloorUnit()),floorUnit:u.getFloorUnit()},reqFields:[]},{obj:o,reqFields:["floor","buildingJoinRoad"]},{obj:Object(c.a)(Object(c.a)({},u.getInitialValue(null,"constructionHeight",u.getSumOfHeights())),{},{floor:u.getMultipleInitialValues(["length","area","width"],d)}),reqFields:[]},{obj:r,reqFields:[]});return l.state={floorArray:u,initialValues:E,rajasowMaster:m,constructionType:o.constructionType,schema:Object(g.b)(u.getFloorSchema)},l}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.floorArray,r=a.initialValues,c=a.schema,s=this.props,i=s.permitData,m=s.prevData,u=s.hasDeletePermission,d=s.isSaveDisabled,g=s.hasSavePermission,T=s.formUrl;return p.a.createElement("div",null,this.props.errors&&p.a.createElement(w.b,{message:this.props.errors.message}),p.a.createElement(f.d,{initialValues:r,validationSchema:c,onSubmit:function(){var a=Object(o.a)(n.a.mark(function a(t,l){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l.setSubmitting(!0),t.applicationNo=i.applicantNo,t.details=t.details.filter(function(e){return!Object(C.t)(e)}),t.details&&t.details.forEach(function(e,a){e&&(Object(S.f)(e),e.totalAmount=Object(A.e)(e.drAmount,e.depositAmount,e.jrAmount),e.floorText&&delete e.floorText)}),t.error&&delete t.error,a.prev=5,a.next=8,e.props.postAction(e.props.postApi,t,!0);case 8:window.scrollTo(0,0),l.setSubmitting(!1),e.props.success&&e.props.success.success&&Object(j.u)(Object(j.c)(e.props.prevData),e.props.parentProps,e.props.success),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(5),console.log("error",a.t0),l.setSubmitting(!1),window.scrollTo(0,0);case 18:case"end":return a.stop()}},a,null,[[5,13]])}));return function(e,t){return a.apply(this,arguments)}}(),render:function(a){var n=a.handleSubmit,o=a.isSubmitting,c=a.handleChange,s=a.values,i=a.setFieldValue,C=a.errors,w=a.validateForm,N=Object(S.e)(s.details),x=N?void 0:"remove-on-print";return p.a.createElement(b.a,{loading:o},p.a.createElement("div",{ref:e.props.setRef},p.a.createElement(F.a,null,p.a.createElement("h2",{className:"top-margin"},V.heading)),p.a.createElement("div",null,p.a.createElement(h.a,{celled:!0,structured:!0,size:"small",compact:"very"},p.a.createElement(h.a.Header,null,p.a.createElement(J,{dharautiClass:x}),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.HeaderCell,{rowSpan:"2",width:4},V.table_head.thead_2,p.a.createElement(v.d,{options:k.f,unitName:"dAreaUnit",areaFields:["drAmount","jrAmount","depositAmount","jDepositAmount","detailsTotal"],relatedFields:["detailsTotal"].concat(Object(l.a)(t.getAllCustomsFields("","details",["dArea","jArea","drAmount","jrAmount","depositAmount","jDepositAmount"])))})),p.a.createElement(h.a.HeaderCell,{className:x,colSpan:"2"},V.table_head.thead_3)),p.a.createElement(U,{dharautiClass:x})),p.a.createElement(h.a.Body,null,r.details.map(function(a,t){var l=a.floor<11;return[p.a.createElement(h.a.Row,{key:t},p.a.createElement(h.a.Cell,null,p.a.createElement("div",null,j.h.find(function(e){return a.floor===e.floor}).value," ",a.block&&"".concat(_.g.block," ").concat(a.block)),a.floor>0&&p.a.createElement("div",{className:"ui checkbox",style:{marginRight:10}},p.a.createElement("input",{type:"checkbox",name:"hasJasta.".concat(t),value:Object(f.e)(s,"hasJasta.".concat(t)),defaultChecked:Object(f.e)(s,"hasJasta.".concat(t)),onChange:function(e){i("details.".concat(t,".jType"),S.g[0].value),c(e)}}),p.a.createElement("label",null,V.table_jasta))),p.a.createElement(h.a.Cell,null,p.a.createElement(v.e,{name:"details.".concat(t,".dArea"),index:t,values:s,mulFieldName:"details.".concat(t,".drRate"),amountFieldName:"details.".concat(t,".drAmount"),error:Object(f.e)(C,"details.".concat(t,".dArea")),floorFieldName:"details.".concat(t,".floor"),setFieldValue:i,floor:a.floor})),p.a.createElement(h.a.Cell,null,p.a.createElement(v.b,{noZero:!1,name:"details.".concat(t,".drRate"),index:t,values:s,mulFieldName:"details.".concat(t,".dArea"),amountFieldName:"details.".concat(t,".drAmount"),error:Object(f.e)(C,"details.".concat(t,".drRate")),setFieldValue:i,isHeightRelevantFloor:l})),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{readOnly:!0,placeholder:"0.0",name:"details.".concat(t,".drAmount"),value:Object(f.e)(s,"details.".concat(t,".drAmount")),error:Object(f.e)(C,"details.".concat(t,".drAmount"))}))),Object(f.e)(s,"hasJasta.".concat(t))&&p.a.createElement(h.a.Row,{key:"jasta-".concat(t)},p.a.createElement(h.a.Cell,null,p.a.createElement(b.a.Field,{inline:!0},p.a.createElement("span",null,j.h.find(function(e){return a.floor===e.floor}).value," ",a.block&&"".concat(_.g.block," ").concat(a.block))," ",p.a.createElement(E.a,{className:"fit-content-select",options:S.g,name:"details.".concat(t,".jType"),onChange:function(l,r){var n=r.value,o=e.getJastaRate(a.floor,n),c=Object(f.e)(s,"details.".concat(t,".jArea"))||0;i("details.".concat(t,".jType"),n),i("details.".concat(t,".jrRate"),o),i("details.".concat(t,".jrAmount"),Object(A.o)(c*o))},value:Object(f.e)(s,"details.".concat(t,".jType"))}))),p.a.createElement(h.a.Cell,null,p.a.createElement(b.a.Field,null,p.a.createElement(v.e,{name:"details.".concat(t,".jArea"),index:t,values:s,mulFieldName:"details.".concat(t,".jrRate"),amountFieldName:"details.".concat(t,".jrAmount"),error:Object(f.e)(C,"details.".concat(t,".jArea")),floorFieldName:"details.".concat(t,".floor"),setFieldValue:i,floor:a.floor}))),p.a.createElement(h.a.Cell,null,p.a.createElement(v.b,{noZero:!1,name:"details.".concat(t,".jrRate"),index:t,values:s,mulFieldName:"details.".concat(t,".jArea"),amountFieldName:"details.".concat(t,".jrAmount"),error:Object(f.e)(C,"details.".concat(t,".jrRate")),setFieldValue:i,isHeightRelevantFloor:l})),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{readOnly:!0,placeholder:"0.00",name:"details.".concat(t,".jrAmount"),error:Object(f.e)(C,"details.".concat(t,".jrAmount")),value:Object(f.e)(s,"details.".concat(t,".jrAmount"))})))]}),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,{className:"print-col-span","data-colspan":"3",colSpan:"3"},V.table_total),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{placeholder:"0.00",name:"detailsTotal",onBlur:function(){if(s.details){var e=s.details.reduce(function(e,a){return a?parseFloat(e)+Object(A.e)(a.drAmount,a.jrAmount,a.depositAmount,a.jDepositAmount):0},0);i("detailsTotal",Object(A.o)(e))}},value:s.detailsTotal,error:C.detailsTotal,onChange:c})))))),p.a.createElement(h.a,{celled:!0,structured:!0,size:"small",compact:"very"},p.a.createElement(h.a.Body,null,p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,{width:4},V.table_foot.Child_1),p.a.createElement(h.a.Cell,{width:6},p.a.createElement(v.c,{name:"formAmt",values:s,setFieldValue:i,error:C.formAmt})),p.a.createElement(h.a.Cell,{rowSpan:O.i?"9":"8"},V.table_foot.Child_6)),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.Child_2),p.a.createElement(h.a.Cell,null,p.a.createElement(v.c,{name:"applicationAmt",values:s,setFieldValue:i,error:C.applicationAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.Child_3),p.a.createElement(h.a.Cell,null,p.a.createElement(v.c,{name:"aminAmt",values:s,setFieldValue:i,error:C.aminAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.Child_4),p.a.createElement(h.a.Cell,null,p.a.createElement(v.c,{name:"anyeAmt",values:s,setFieldValue:i,error:C.anyeAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.jaribanaDastur),p.a.createElement(h.a.Cell,null,p.a.createElement(v.c,{name:"jaribanaDasturAmt",values:s,setFieldValue:i,error:C.jaribanaDasturAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.sarsaphaiDastur),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{readOnly:!0,placeholder:"0.00",name:"sarsaphaiDasturAmt",value:s.sarsaphaiDasturAmt,error:C.sarsaphaiDasturAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.batabaranDastur),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{readOnly:!0,placeholder:"0.00",name:"batabaranDasturAmt",value:s.batabaranDasturAmt,error:C.batabaranDasturAmt}))),p.a.createElement(h.a.Row,null,p.a.createElement(h.a.Cell,null,V.table_foot.totalAmt),p.a.createElement(h.a.Cell,null,p.a.createElement(R.c,{readOnly:!0,placeholder:"0.00",name:"totalAmt",value:s.totalAmt,error:C.totalAmt}))))),s.totalAmt&&s.totalAmt>0?p.a.createElement("div",null,V.formSecond.amountInWordsTotal,": ",D.a.getNepaliWord(s.totalAmt)):null),p.a.createElement("br",null),p.a.createElement(y.b,{errors:C,validateForm:w,formUrl:T,hasSavePermission:g,hasDeletePermission:u,isSaveDisabled:d,prevData:Object(j.c)(m),handleSubmit:n}))}}))}}]),t}(d.Component),J=p.a.memo(function(e){e.dharautiClass;return p.a.createElement(h.a.Row,null,p.a.createElement(h.a.HeaderCell,{rowSpan:"3"},V.table_head.thead_1),p.a.createElement(h.a.HeaderCell,{colSpan:"3"},V.table_head.thead_type.dhalan))}),U=p.a.memo(function(e){e.dharautiClass;return p.a.createElement(h.a.Row,null,p.a.createElement(h.a.HeaderCell,null,V.table_head.thead_3_hasChild.theadChild_1),p.a.createElement(h.a.HeaderCell,null,V.table_head.thead_3_hasChild.theadChild_2))});a.a=x},982:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(603),o=t(621),c=t(180),s=t(678);a.default=function(e){return r.a.createElement(n.a,{api:[new o.a(c.a.sansodhankoTippaniAdesh).setForm().getParams(),new o.a(c.a.rajasowSetup,"rajasowMaster").setUtility().setConcatToApi({prefix:"?wardNo=",fieldName:"newWardNo",needsTranslation:!0}).getParams()],onBeforeGetContent:{param1:["getElementsByTagName","input","value",null,"parent"],param2:["getElementsByClassName","ui label","innerText"],param3:["getElementsByClassName","ui dropdown","innerText"],param4:["15dayspecial"],param5:["removeOnPrint"]},prepareData:function(e){return e},parentProps:e,useInnerRef:!0,render:function(a){return r.a.createElement(s.a,Object.assign({},a,{parentProps:e,postApi:c.a.sansodhankoTippaniAdesh}))}})}}}]);
//# sourceMappingURL=22.226b262d.chunk.js.map