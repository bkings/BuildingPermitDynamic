(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{838:function(e,t,a){"use strict";a.r(t);var r=a(25),n=a(26),i=a(39),o=a(38),s=a(0),l=a(198),c=a(321),u=a(550),d=a(546),p=a(208),m=a(605),f=a(647),b=a(573),g=a(613),h=a(56),w=a(210),y=a(11),v=a(700),P=a(122),E=a(211),N=a(27),C=a(13),x=a(125),O=a(212),S=a(209),R=a.n(S),j=a(648),D=a(53),Y=a(93),F=v.a.report_data,T=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).myGrid=s.createRef(),n.updatePermits=function(e,t,a){n.props.getReportPermits(e,t,a)},n.setPrintContent=function(e){Object(x.b)(e)},n.datafield=[{name:"id",type:"string"},{name:"label",type:"string"},{name:"count",type:"string"}],n.column=[{text:"\u0915\u094d\u0930.\u0938",dataField:"id",cellsalign:"center",align:"center",width:"50px"},{text:"\u0928\u093f\u0930\u094d\u092e\u093e\u0923\u0915\u093e \u091a\u0930\u0923",dataField:"label",cellsalign:"center",align:"center",width:"400px"},{text:"\u0938\u0902\u0916\u094d\u092f\u093e",dataField:"count",cellsalign:"center",align:"center",width:"200px"}],n.onRowClick=function(e){var t=e.args.row.boundindex;"\u0915\u0941\u0932 \u0930\u093e\u091c\u0938\u094d\u0935"!==e.args.row.label&&n.props.history.push({pathname:"/user/report-list/".concat(n.state.fiscalCode,"/").concat(Object(D.a)(n.state.wardNo)?"allWards":n.state.wardNo,"/").concat(Object(D.a)(n.state.constructionType)?"all":n.state.constructionType,"/").concat(t+1)})},n.state={organization:"",fiscalYearOptions:[],reportPermits:[],wardOptions:[],fiscalCode:0,wardNo:"",constructionType:"",isDesigner:Object(C.r)()},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchLocalDataAndReports(new O.b([new O.a(y.m,"fiscalYears"),new O.a(y.B,"userData"),new O.a(y.C,"wardMaster")]))}},{key:"componentDidUpdate",value:function(e){if(e.fiscalYears!==this.props.fiscalYears&&this.props.fiscalYears&&Array.isArray(this.props.fiscalYears)){var t=this.props.fiscalYears.map(function(e){return{id:Number(e.yearCode),text:String(e.yearName),value:Number(e.yearCode)}});this.setState({fiscalYearOptions:t,fiscalCode:t[0].value})}if(e.wardMaster!==this.props.wardMaster&&this.props.wardMaster&&Array.isArray(this.props.wardMaster)){var a=this.props.wardMaster.map(function(e){return{id:e.id,text:String(e.name),value:String(e.name)}}).concat({id:"",text:F.allWards,value:""});this.setState({wardOptions:a,wardNo:""})}if(e.userData!==this.props.userData&&this.props.userData&&this.props.userData.organization&&this.setState({organization:this.props.userData.organization.name}),e.reportPermits!==this.props.reportPermits&&this.props.reportPermits){var r=Object(j.a)(this.props.reportPermits,this.state.isDesigner);this.setState({reportPermits:r})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,r=t.errors,n=this.state,i=n.fiscalYearOptions,o=n.fiscalCode,f=n.reportPermits,b=n.organization,h=n.wardNo,y=n.constructionType,v=n.wardOptions;return s.createElement(s.Fragment,null,s.createElement(R.a,{title:"EBPS - Report"}),s.createElement(P.c,{initialValues:{fiscalyear:o,wardNo:h,constructionType:y},onSubmit:function(){},enableReinitialize:!0,render:function(t){return s.createElement(s.Fragment,null,r&&s.createElement(E.b,{message:r.message}),s.createElement(l.a,{centered:!0},s.createElement(l.a.Row,null,s.createElement(l.a.Column,{computer:8,mobile:16,tablet:12,textAlign:"left"},s.createElement("div",{ref:function(t){return e.RPrint=t}},s.createElement(c.a,{style:{textAlign:"center"}},s.createElement(c.a.Content,null,b," ",F.infobarName)),s.createElement("br",null),s.createElement("div",{className:"flex-container-flex-start margin-bottom"},s.createElement(u.a.Field,{className:"item zIndexSelect compact"},F.fiscalYear,s.createElement(d.a,{placeholder:"Select Fiscal Year",options:i,name:"fiscalyear",onChange:function(a,r){var n=r.value;t.setFieldValue("fiscalyear",n),e.setState({fiscalCode:Number(n)}),e.updatePermits(Number(n),h,y)},value:t.values.fiscalyear})),s.createElement(u.a.Field,{className:"item zIndexSelect compact"},F.wardNo,":",s.createElement(d.a,{options:v,name:"wardNo",onChange:function(a,r){var n=r.value;t.setFieldValue("wardNo",n),e.setState({wardNo:String(n)}),e.updatePermits(o,String(n),y)},value:t.values.wardNo})),s.createElement(u.a.Field,{className:"item zIndexSelect compact"},F.constructionType,":",s.createElement(d.a,{options:Y.i,name:"constructionType",onChange:function(a,r){var n=r.value;t.setFieldValue("constructionType",n),e.setState({constructionType:String(n)}),e.updatePermits(o,h,String(n))},value:t.values.constructionType}))),r||a?s.createElement(w.b,{errors:r,loading:a}):s.createElement("div",{className:"jqx-tables"},s.createElement(g.a,{ref:e.myGrid,width:"650px",groupable:e.groupable,source:new g.b.dataAdapter({datafields:e.datafield,datatype:"array",id:"id",localdata:f}),columns:e.column,autoheight:!0,sortable:!0,columnsresize:!0,rowsheight:35,filterable:!0,onRowselect:e.onRowClick}))),s.createElement("br",null),s.createElement(m.a,{ui:s.createElement("div",null,s.createElement(p.a,{color:"violet"},"Print")),content:function(){return e.RPrint},onBeforeGetContent:function(){e.setPrintContent(!0),e.RPrint=e.RPrint.cloneNode(!0),Object(C.a)(e.RPrint),Object(C.t)(e.RPrint,"getElementsByClassName","ui dropdown","innerText")},onBeforePrint:function(){e.setPrintContent(!1)}})))))}}))}}]),a}(s.PureComponent),z={getReportPermits:f.c,getLocalDataByKey:b.g,fetchLocalDataAndReports:f.a,setPrint:function(e){return Object(x.b)(e)}};t.default=Object(N.j)(Object(h.b)(function(e){return{reportPermits:e.root.dashboard.reportPermits,fiscalYears:e.root.dashboard.fiscalYears,userData:e.root.dashboard.userData,wardMaster:e.root.dashboard.wardMaster,errors:e.root.ui.errors,loading:e.root.ui.loading}},z)(T))}}]);
//# sourceMappingURL=19.33163de9.chunk.js.map